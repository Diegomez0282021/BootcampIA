<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Obesidad - ML</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <style>
#ciclo .lifecycle {
    display: grid;
    gap: 18px;
  }
  #ciclo .stepper {
    background: #fff;
    border-radius: var(--radius);
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
    padding: 16px;
    border-left: 5px solid var(--secondary-color);
  }
  #ciclo .steps {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding: 0;
  margin: 0 0 12px 0;
  list-style: none;
}

#ciclo .step {
  flex: 0 0 auto;
  width: 140px; /* adjust for readability */
  background: var(--background-color);
  border-radius: 12px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  text-align: center;
  cursor: pointer;
  border: 1px solid #e6eef6;
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
}

#ciclo .step .dot {
  width: 36px; height: 36px;
  border-radius: 50%;
  display: grid; place-items: center;
  font-weight: 700;
  background: #fff;
  border: 2px solid var(--secondary-color);
  color: var(--secondary-color);
}

#ciclo .step .label {
  font-weight: 600;
  font-size: 0.9rem;
  color: var(--primary-color);
  word-wrap: break-word; /* long words stay inside */
}

#ciclo .step.active {
  background: #e6f3ff;
  border-color: var(--secondary-color);
}
#ciclo .step.active .dot {
  background: var(--secondary-color);
  color: #fff;
}
#ciclo .step .label { font-weight: 600; color: var(--primary-color); font-size: .95rem; }

  #ciclo .progress {
    height: 8px; background: #e9eff5; border-radius: 999px; overflow: hidden;
  }
  #ciclo .progress-bar {
    height: 100%; width: 0%;
    background: linear-gradient(90deg, var(--secondary-color), #00aaff);
    transition: width .4s ease;
  }

  #ciclo .panels {
  position: relative;
  min-height: 280px; /* reserve space so it doesn’t jump */
}

#ciclo .panel {
  position: absolute;
  top: 0; left: 0; right: 0;
  background: #fff;
  border-radius: var(--radius);
  box-shadow: 0 6px 15px rgba(0,0,0,0.08);
  border-left: 5px solid var(--secondary-color);
  padding: 22px 24px;
  opacity: 0; transform: translateY(14px);
  transition: opacity .35s ease, transform .35s ease;
  pointer-events: none;
}

#ciclo .panel.active {
  opacity: 1; transform: translateY(0);
  pointer-events: auto;
  position: absolute; /* always stacked in place */
}

  #ciclo .panel h3 {
    color: var(--primary-color);
    text-align: center;
    margin-bottom: 10px;
    font-family: 'Poppins', sans-serif;
  }
  #ciclo .panel .meta {
    display: grid; gap: 6px; margin-bottom: 12px;
    justify-items: center; color: #577; font-size: .95rem;
  }
  #ciclo .panel ul { list-style: none; padding-left: 0; }
  #ciclo .panel li { text-align: justify; }
  #ciclo .panel li::before { content: "✔️ "; margin-right: 4px; }

  #ciclo .controls {
    display: flex; justify-content: space-between; gap: 10px; margin-top: 6px;
  }
  #ciclo .controls .btn {
    width: 100%; text-align: center;
  }

  #ciclo .video-toggle {
    text-align: center; margin-top: 6px;
  }
  #ciclo .video-wrap {
    max-height: 0; overflow: hidden;
    transition: max-height .5s ease;
    border-radius: var(--radius);
  }
  #ciclo .video-wrap.open { max-height: 520px; }
  #ciclo .video {
    width: 100%; height: 480px; border: 0; display: block;
    border-radius: 10px; box-shadow: 0 6px 15px rgba(0,0,0,0.08); margin-top: 12px;
  }

  @media (max-width: 900px) {
    #ciclo .steps { grid-template-columns: repeat(9, minmax(180px, 1fr)); }
  }



    :root {
      --primary-color: #005599;
      --secondary-color: #0077cc;
      --background-color: #f4f6f8;
      --card-background: #ffffff;
      --text-color: #333;
      --transition-speed: 0.3s ease;
      --radius: 12px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Roboto', sans-serif;
      background: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      z-index: 1000;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    header img.avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid var(--secondary-color);
    }
    header .title {
      display: flex;
      flex-direction: column;
    }
    header .title h1 {
      font-size: 1.3rem;
      color: var(--secondary-color);
    }
    header .title span {
      font-size: 0.85rem;
      color: #555;
    }

    /* Horizontal Nav */
    nav {
      background: #fff;
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 10px;
      margin-top: 65px;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 65px;
      z-index: 900;
    }
    nav a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      border-radius: var(--radius);
      transition: background var(--transition-speed), color var(--transition-speed);
    }
    nav a:hover, nav a.active {
      background: var(--secondary-color);
      color: #fff;
    }

    main {
      padding: 30px 20px;
      max-width: 1200px;
      margin: auto;
    }
    section {
      display: none;
      background: var(--card-background);
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      margin-bottom: 25px;
      border-left: 5px solid var(--secondary-color);
      animation: fadeIn 0.5s ease;
    }
    section.active { display: block; }
    section h2 {
      font-family: 'Poppins', sans-serif;
      color: var(--primary-color);
      margin-bottom: 15px;
      text-align: center;
    }
    section p, section li {
      text-align: justify;
    }
    section ul {
      list-style: none;
      padding-left: 0;
    }
    section ul li::before {
      content: "✔️ ";
      color: var(--secondary-color);
    }

    /* Buttons */
    .nav-buttons {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #f9fbff;
  padding: 12px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-top: 2px solid #0077cc;
  box-shadow: 0 -2px 6px rgba(0,0,0,0.08);
  z-index: 1000;
}

/* Buttons */
.nav-buttons .btn {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  font-size: 14px;
  color: #fff;
  background: linear-gradient(135deg, #0077cc, #00aaff);
  box-shadow: 0 4px 8px rgba(0,0,0,0.12);
}

.nav-buttons .btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.18);
}

.nav-buttons .btn:active {
  transform: scale(0.96);
}



     /* Make all .btn elements consistent */
.btn {
  display: inline-block;       /* same for <a> and <button> */
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  background: linear-gradient(135deg, #007BFF, #0056b3);
  color: #fff;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 220px;            /* ✅ forces equal width */
}

/* Ensure button elements don’t shrink */
button.btn {
  width: auto;
}

/* Hover effect */
.btn:hover {
  background: linear-gradient(135deg, #0056b3, #003d80);
  transform: translateY(-2px);
}


    footer {
      text-align: center;
      padding: 15px;
      background: #fff;
      color: #555;
      border-top: 1px solid #ddd;
      margin-top: 20px;
    }
.panel img.step-image {
  max-width: 90%;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.15);
  border: 4px solid #f5f9ff;
  margin: 16px 0;
}

#analisis {
  position: relative;
  background: url("Gifs/Analisis.jpg") no-repeat center center/cover;
  color: #fff;
  padding: 5rem 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

#analisis .overlay {
  background: rgba(0, 0, 0, 0.55);
  padding: 2rem;
  border-radius: 12px;
  max-width: 800px;
  margin: 0 auto;
  text-align: center; /* ✅ center text and button */
}


#analisis h2 {
  text-align: center;
  margin-bottom: 1.5rem;
  color: #fff;
}

#analisis p {
  line-height: 1.6;
  font-size: 1.1rem;
}
#analisis .overlay p,
#pdf .overlay p {
  margin-bottom: 1.5rem; /* ✅ consistent spacing */
}

#analisis .btn,
#pdf .btn {
  margin-top: 1rem; /* ✅ ensures button never sticks to text */
}

#pdf {
  position: relative;
  background: url("Gifs/PDF.jpg") no-repeat center center/cover;
  color: #fff;
  padding: 5rem 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

#pdf .overlay {
  background: rgba(0, 0, 0, 0.55); /* dark overlay for readability */
  padding: 2rem;
  border-radius: 12px;
  max-width: 800px;
  margin: 0 auto;
  text-align: center;
}

#pdf h2 {
  margin-bottom: 1.5rem;
  color: #fff;
}

#pdf p {
  line-height: 1.6;
  font-size: 1.1rem;
  margin-bottom: 1.5rem;
}

#pdf .btn {
  display: inline-block;
  padding: 0.8rem 1.5rem;
  background: linear-gradient(90deg, #007BFF, #00AEEF);
  color: #fff;
  text-decoration: none;
  border-radius: 30px;
  transition: transform 0.2s ease, background 0.3s ease;
}

#pdf .btn:hover {
  transform: translateY(-3px);
  background: linear-gradient(90deg, #0056b3, #0088cc);
}


.context-box {
  background: #fff;
  border-left: 5px solid #007BFF;
  border-radius: 10px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  text-align: justify;
}

.context-box h3 {
  margin-bottom: 1rem;
  color: #007BFF;
}

.context-box p {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.styled-list {
  list-style: none;
  padding-left: 0;
  margin-bottom: 1.5rem;
}

.styled-list li {
  position: relative;
  padding-left: 1.8rem;
  margin-bottom: 0.5rem;
}

.styled-list li::before {
  content: "✔";
  position: absolute;
  left: 0;
  color: #007BFF;
  font-weight: bold;
}
/* Responsive + styled video */
/* Box styling */
/* Flex container for both boxes */
.interactive-row {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  justify-content: center;
  margin-top: 20px;
}

/* Shared box style */
.interactive-box {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  border-left: 5px solid #0077cc;
  flex: 1 1 45%;   /* Each box takes ~45% of width */
  max-width: 500px;
}

/* Make simulator inputs consistent */
.interactive-box input,
.interactive-box select {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
  border-radius: 6px;
  border: 1px solid #ccc;
}

/* Video styling */
.video-container {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 */
  height: 0;
  overflow: hidden;
  border-radius: 12px;
  margin-top: 1rem;
}

.video-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 12px;
}



/* Hover effect for interactivity */
.video-container:hover {
  transform: scale(1.02);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}


    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      nav {
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      nav a {
        font-size: 0.9rem;
        padding: 6px 10px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-left">
      <img src="https://i.pravatar.cc/40" alt="Avatar" class="avatar">
      <div class="title">
        <span>Bienvenido, Usuario</span>
        <h1>Portal Obesidad - ML</h1>
      </div>
    </div>
  </header>

  <nav>
    <a href="#inicio" class="active" onclick="showSection('inicio', this)">🏠 Inicio</a>
    <a href="#ciclo" onclick="showSection('ciclo', this)">🔄 Ciclo de vida</a>
    <a href="#contexto" onclick="showSection('contexto', this)">📌 Contexto</a>
    <a href="#analisis" onclick="showSection('analisis', this)">📊 Análisis</a>
    <a href="#pdf" onclick="showSection('pdf', this)">📄 PDF</a>
    <a href="#interactiva" onclick="showSection('interactiva', this)">🖱️ Sección Interactiva</a>

  </nav>

  <main>
    <section id="inicio" class="active">
  <h2>Inicio</h2>
  <p>Video explicativo sobre el dataset de obesidad:</p>

  <!-- Responsive video wrapper -->
  <div class="video-container">
    <iframe 
      src="https://www.youtube-nocookie.com/embed/jsgK2uuAh6w" 
      frameborder="0" 
      allowfullscreen>
    </iframe>
  </div>

  <p>
   El conjunto de datos “Obesity or CVD Risk – Classify/Regressor/Cluster” de Kaggle reúne información estructurada sobre variables antropométricas, de estilo de vida y de riesgo asociado, siendo un recurso idóneo para un análisis exploratorio, aplicar técnicas estadísticas y de visualización para describir distribuciones y examinar correlaciones. Al ser un dataset de acceso libre y con un enfoque en salud, cumple con los criterios éticos y prácticos para el desarrollo de este proyecto.
  </p>

  <ul>
    <li><b>Prevalencia:</b> La obesidad tipo III fue la más frecuente (32%).</li>
    <li><b>Factores clave:</b> Peso, altura y edad mostraron mayor poder predictivo.</li>
    <li><b>Hábitos protectores:</b> Actividad física y consumo de agua reducen IMC.</li>
    <li><b>Movilidad:</b> 68% usa transporte público; movilidad activa disminuye con IMC.</li>
  </ul>
</section>

    <section id="ciclo">
  <h2>Ciclo de vida de un proyecto de ML</h2>

  <div class="lifecycle">
    <div class="stepper" aria-label="Pasos del ciclo de vida de Machine Learning">
      <ol class="steps" id="ml-steps">
        <li class="step active" data-step="0" tabindex="0">
          <div class="dot">1</div><div class="label">Definir problema</div>
        </li>
        <li class="step" data-step="1" tabindex="0">
          <div class="dot">2</div><div class="label">Recolección de datos</div>
        </li>
        <li class="step" data-step="2" tabindex="0">
          <div class="dot">3</div><div class="label">Preparacion y limpieza</div>
        </li>
        <li class="step" data-step="3" tabindex="0">
          <div class="dot">4</div><div class="label">EDA</div>
        </li>
        <li class="step" data-step="4" tabindex="0">
          <div class="dot">5</div><div class="label">Ingeniería de modelos</div>
        </li>
        <li class="step" data-step="6" tabindex="0">
          <div class="dot">6</div><div class="label">Evaluación</div>
        </li>
        <li class="step" data-step="7" tabindex="0">
          <div class="dot">7</div><div class="label">Despliegue</div>
        </li>
        <li class="step" data-step="8" tabindex="0">
          <div class="dot">8</div><div class="label">Mantenimiento & Actualización</div>
        </li>
      </ol>
      <div class="progress" aria-hidden="true"><div class="progress-bar" id="ml-progress"></div></div>
    </div>

    <div class="panels" id="ml-panels">
      <!-- 0 -->
      <article class="panel active" data-step="0">
        <h3>1) Definir el problema</h3>
        <div class="meta">🎯 Objetivo claro • 🎚️ Tipo de tarea (clasificación/regresión) • 📏 Métrica de éxito</div>
        <ul>
          <li>En esta fase se debe determinar claramente qué se quiere lograr con el modelo, se evalúa si el problema es adecuado para ser abordado con ML y si se dispone de datos suficientes y de calidad. 
            Responde a la pregunta: ¿Qué queremos resolver?</li>
          <li>Traduce a un problema ML y define <b>métricas</b> (AUC, F1, RMSE).</li>
        
        </ul>
      </article>
      <!-- 1 -->
      <article class="panel" data-step="1">
        <h3>2) Recolección de datos</h3>
        <div class="meta">🗂️ Orígenes • 🔐 Permisos • 📄 Documentación</div>
        <ul>

         
          En el proyecto de predicción de obesidad, la recolección de datos se realizó de la siguiente manera:
         <li>Fuente de datos: Se utilizaron dos conjuntos de datos en formato CSV:
         <b> ObesityDataSet.csv, train.csv</b>
          <li>Estructura de los datos: El dataset incluye 17 columnas con variables como:
          <li>Demográficas: Gender, Age, Height, Weight
          <li>Hábitos alimenticios: FAVC, FCVC, NCP, CAEC, CALC, CH2O o	Actividad física: FAF
          <li>Historial familiar: family_history_with_overweight
         <li>	Consumo de tabaco: SMOKE
         <li>	Uso de tecnología: TUE (convertido a minutos)
          <li>	Transporte: MTRANS
          <li>	Variable objetivo: NObeyesdad (clasificación de peso)
          <li>	Calidad de datos:
          No hay valores nulos.
          Se identificaron y eliminaron duplicados (24 registros).
          Se normalizaron variables categóricas binarias (yes/no → 1/0).
          Se agregó una variable sintética: Country (Colombia/Perú) para enriquecer el análisis.
        </ul>

      </article>
      <!-- 2 -->
      <article class="panel" data-step="2">
  <h3>3) Limpieza de datos</h3>
  <div class="meta">🧹 Depuración • 📊 Normalización • 🔑 Selección de variables</div>

  <div style="background:#f9fbff; padding:18px 20px; border-radius:12px; 
              box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #0077cc;
              line-height:1.6;">

    <p><b>Analogía:</b> Esta etapa es como limpiar y organizar los ingredientes antes de cocinar.</p>
    <p>El dataset contiene variables demográficas, clínicas y de estilo de vida que son predictores conocidos de obesidad y enfermedades cardiovasculares. Tiene <b>17 variables</b> y <b>2111 registros</b>.</p>

    <h4 style="color:#005599; margin-top:14px;">1️⃣ Exploración inicial</h4>
    <ul style="list-style:none; padding:0;">
      <li>Verificar tipos de datos (numéricos, categóricos, booleanos).</li>
      <li>Identificar valores faltantes o erróneos.</li>
      <li>Revisar la distribución de cada variable (edad, IMC, presión arterial).</li>
      <li>¿Qué variables hay? Edad, género, IMC, presión arterial, frecuencia cardíaca...</li>
      <li>Detección de duplicados o valores imposibles (<i>ej: edad = 0</i>).</li>
    </ul>
    <p><i>Ejemplo:</i> Si hay registros con <b>edad = 0</b> o <b>IMC = 1000</b>, probablemente sean errores.</p>

    <h4 style="color:#005599; margin-top:14px;">2️⃣ Limpieza</h4>
    <ul style="list-style:none; padding:0;">
      <li>🧽 Eliminar o imputar valores nulos (media, mediana, valor lógico).</li>
      <li>🧽 Corregir inconsistencias (ej: “M”, “F”, “femenino” → unificar).</li>
      <li>🧽 Detectar y tratar outliers con boxplots o z-scores.</li>
      <li>🧽 Eliminar duplicados innecesarios.</li>
    </ul>
    <p><i>Observación:</i> Si el 30% de los datos de frecuencia cardíaca están vacíos, quizá esa variable no sea útil.</p>

    <h4 style="color:#005599; margin-top:14px;">3️⃣ Codificación de variables</h4>
    <ul style="list-style:none; padding:0;">
      <li>🔢 <b>Label Encoding:</b> Texto → números (Femenino=0, Masculino=1).</li>
      <li>🔢 <b>One-Hot Encoding:</b> Una columna por cada categoría (útil si son pocas).</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">4️⃣ Normalización o escalado</h4>
    <ul style="list-style:none; padding:0;">
      <li>📏 Ajustar variables a la misma escala (edad vs. presión arterial).</li>
      <li>📏 <b>Min-Max Scaling:</b> valores entre 0 y 1.</li>
      <li>📏 <b>Standard Scaling:</b> media 0 y desviación estándar 1.</li>
    </ul>
    <p><i>Ejemplo:</i> IMC de 18–40 vs. edad de 0–100 → si no se escalan, la edad domina.</p>

    <h4 style="color:#005599; margin-top:14px;">5️⃣ Selección de características</h4>
    <ul style="list-style:none; padding:0;">
      <li>🔑 Identificar variables relevantes.</li>
      <li>🔑 Eliminar variables altamente correlacionadas.</li>
      <li>🔑 Usar <b>importancia de características</b> (Random Forest, ANOVA, PCA).</li>
    </ul>
  </div>
</article>

      <!-- 3 -->
     <article class="panel" data-step="5">
  <h3>4) Análisis Exploratorio de Datos (EDA)</h3>
  <div class="meta">🔍 Exploración • 📊 Visualización • 📈 Patrones</div>

  <div style="background:#f9fbff; padding:18px 20px; border-radius:12px; 
              box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #0077cc;
              line-height:1.6;">

    <p><b>El Análisis Exploratorio de Datos (EDA)</b> es una etapa clave para comprender la estructura, 
    distribución y relaciones dentro del dataset antes de aplicar modelos de Machine Learning.</p>

    <p>En el caso de nuestro <b>dataset de obesidad</b> (2111 registros, 17 atributos), 
    el EDA permite identificar <b>patrones</b>, <b>correlaciones</b> y posibles problemas de calidad.</p>

    <h4 style="color:#005599; margin-top:14px;">📊 Aspectos principales del EDA</h4>
    <ul style="list-style:none; padding:0;">
      <li><b>Distribución de variables:</b> Revisar edad, peso, altura, IMC y su variabilidad.</li>
      <li><b>Diferencias de género:</b> Analizar hábitos alimenticios y de actividad física según sexo.</li>
      <li><b>Hábitos y estilos de vida:</b> Consumo de calorías, frecuencia de comidas rápidas, ejercicio físico.</li>
      <li><b>Correlaciones:</b> Relación entre IMC y variables como consumo de alcohol, sueño o tiempo de pantalla.</li>
      <li><b>Detección de anomalías:</b> Outliers en peso, altura o frecuencia de comidas.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">📈 Visualizaciones recomendadas</h4>
    <ul style="list-style:none; padding:0;">
      <li>Histogramas y boxplots para edad, IMC y horas de actividad.</li>
      <li>Gráficos de barras para hábitos de consumo (bebidas azucaradas, snacks, alcohol).</li>
      <li>Mapas de calor de correlaciones entre variables.</li>
      <li>Diagramas de dispersión para explorar la relación entre altura, peso e IMC.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">✅ Conclusión</h4>
    <p>El EDA permite <b>construir hipótesis</b> sobre los factores que influyen en la obesidad y preparar 
    la base para la <b>selección de características</b> y el <b>modelado</b>. En este dataset, el análisis inicial 
    revela que <b>hábitos alimenticios y de ejercicio</b> tienen una fuerte relación con la categoría de obesidad.</p>
  </div>
</article>


   
      <!-- 6 -->
      <article class="panel" data-step="4">
  <h3>5) Ingeniería de características y modelo</h3>
  <div class="meta">⚙️ Transformaciones • 🧮 Selección • 🤖 Modelado</div>

  <div style="background:#f9fbff; padding:18px 20px; border-radius:12px; 
              box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #0077cc;
              line-height:1.6;">

    <p><b>INGENIERÍA DE MODELO:</b> En este proyecto se aplican modelos de <b>clasificación supervisada</b> 
      (<i>Regresión Logística, Random Forest, Árboles de decisión, XGBoost y Redes Neuronales</i>) 
      para predecir el nivel de obesidad o riesgo cardiovascular. 
      Además, se explora <b>clustering no supervisado</b> (K-Means, DBSCAN) 
      para identificar perfiles de riesgo similares.</p>

    <h4 style="color:#005599; margin-top:14px;">🔧 La ingeniería de características incluye:</h4>
    <ul style="list-style:none; padding:0;">
      <li>Normalización de variables numéricas (peso, altura, IMC).</li>
      <li>Creación de nuevas variables como el <b>IMC</b>.</li>
      <li>Codificación de variables categóricas.</li>
      <li>Control de outliers.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">📊 Selección de características</h4>
    <ul style="list-style:none; padding:0;">
      <li>Métodos de <b>importancia de variables</b> (Random Forest, Permutation Importance).</li>
      <li>Reducción dimensional con <b>PCA</b> de forma exploratoria.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">🤖 Entrenamiento de modelos</h4>
    <ul style="list-style:none; padding:0;">
      <li>Conjuntos de <b>entrenamiento/validación</b>.</li>
      <li>Métricas: <b>Accuracy, Precision, Recall, F1-Score</b>.</li>
      <li>Ajuste de hiperparámetros con <b>Grid Search</b> o <b>Random Search</b>.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">🔍 Interpretabilidad</h4>
    <p>Se incorporan técnicas como <b>SHAP</b> o <b>Permutation Importance</b> para entender qué factores influyen más en la predicción.</p>

    <p style="margin-top:12px;"><b>✅ En conclusión:</b> la ingeniería del modelo combina clasificación y segmentación con un enfoque robusto en la calidad de los datos y la interpretabilidad, lo que permite no solo <b>predecir riesgos con precisión</b>, sino también <b>identificar hábitos clave</b> que impactan en la obesidad y las enfermedades cardiovasculares.</p>
  </div>
</article>

      <!-- 7 -->
     </article>

      <!-- 3 -->
      <article class="panel" data-step="5">
  <h3>6) Evaluación del modelo</h3>
  <div class="meta">📊 Métricas • 🔍 Validación • 📈 Interpretabilidad</div>

  <div style="background:#f9fbff; padding:18px 20px; border-radius:12px; 
              box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #0077cc;
              line-height:1.6;">

    <p><b>EVALUACIÓN DEL MODELO</b> es el proceso de analizar y medir qué tan bien un modelo de machine learning aprende de los datos y generaliza a nuevos casos. No basta con que funcione en el entrenamiento: debe ser confiable en la práctica.</p>

    <p><b>La evaluación permite:</b></p>
    <ul style="list-style:none; padding:0;">
      <li>Detectar errores y sesgos</li>
      <li>Medir la capacidad de generalización</li>
      <li>Evitar <i>overfitting</i> y <i>underfitting</i></li>
      <li>Comparar modelos y elegir el más robusto</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">📂 Nuestra base de datos</h4>
    <ul style="list-style:none; padding:0;">
      <li>2111 registros y 17 atributos (Kaggle).</li>
      <li>Datos demográficos y conductuales (hábitos, actividad física, género, edad, altura, peso, etc.).</li>
      <li>La etiqueta principal es <b>NObeyesdad</b>, que clasifica niveles de obesidad en múltiples categorías.</li>
      <li>Adecuado para <b>clasificación multiclase</b>, <b>regresión</b> o <b>clustering</b>.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">⚙️ ¿Cómo se hace la evaluación?</h4>
    <ol style="padding-left:18px; margin:0;">
      <li><b>División de datos:</b> Entrenamiento (80%) y prueba (20%). También validación cruzada (k-fold) para mayor robustez.</li>
      <li><b>Comparación entre modelos:</b> Se prueban varios algoritmos y se elige el mejor según las métricas.</li>
      <li><b>Visualización de resultados:</b> Matriz de confusión, curvas ROC, errores de predicción, gráficos claros.</li>
    </ol>

    <p style="margin-top:12px;">También son importantes: curvas de aprendizaje, análisis de sesgo-varianza, análisis multivariados, e interpretabilidad (ej. <b>SHAP</b>, <b>LIME</b>).</p>

    <p><b>¿Por qué es crucial?</b> Un modelo mal evaluado puede parecer funcional, pero fallar en la práctica. En salud, esto podría significar diagnósticos erróneos o tratamientos inadecuados.</p>
  </div>
</article>

<article class="panel" data-step="6">
  <h3>7) Despliegue del modelo</h3>
  <div class="meta">🚀 Implementación • 🌐 Accesibilidad • 🖥️ Interfaz</div>

  <div style="background:#f9fbff; padding:18px 20px; border-radius:12px; 
              box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #0077cc;
              line-height:1.6;">

    <p><b>DESPLIEGUE DEL MODELO EN EL PROYECTO:</b> Una vez entrenado y evaluado el modelo de Machine Learning para predecir el riesgo de obesidad o enfermedad cardiovascular, la fase de despliegue consiste en poner ese modelo al servicio de los usuarios o de los tomadores de decisiones.</p>

    <h4 style="color:#005599; margin-top:14px;">⚙️ ¿Cómo se haría el despliegue en este caso?</h4>
    <ul style="list-style:none; padding:0;">
      <li>✔️ Guardamos el modelo ya entrenado.</li>
      <li>✔️ Lo conectamos a una <b>calculadora web</b> (como el simulador), donde el usuario ingresa: peso, altura, ejercicio, alimentación.</li>
      <li>✔️ La aplicación muestra si tiene <b>bajo riesgo, riesgo moderado o alto riesgo</b>.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">💡 ¿Por qué esto ya cuenta como despliegue?</h4>
    <p>Porque el modelo ya no está solo en un código técnico, sino que lo puede usar <b>cualquiera sin saber de programación</b>.  
    Eso es exactamente lo que implica “desplegar” un modelo.</p>

    <h4 style="color:#005599; margin-top:14px;">✅ Conclusión</h4>
    <p>En este proyecto, el despliegue no requiere necesariamente infraestructura en la nube.  
    Se propone como solución práctica <b>generar una interfaz web</b> (simulador) que permita a cualquier usuario ingresar sus datos y observar el riesgo estimado utilizando un modelo previamente entrenado y guardado.  
    Esto demuestra la funcionalidad del sistema y convierte el análisis en una <b>herramienta real de apoyo a la toma de decisiones</b>.</p>
  </div>
</article>
<article class="panel" data-step="7">
  <h3>8) Mantenimiento y Actualización</h3>
  <div class="meta">🔄 Ciclo continuo • 📈 Retraining • 🧹 Limpieza periódica</div>

  <div style="background:#f9fbff; padding:18px 20px; border-radius:12px; 
              box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #0077cc;
              line-height:1.6;">

    <p><b>Mantenimiento y Actualización:</b> El mantenimiento y la actualización del modelo y los datos son clave para la sostenibilidad del proyecto.</p>

    <h4 style="color:#005599; margin-top:14px;">🛠️ Mantenimiento del Modelo</h4>
    <ul style="list-style:none; padding:0;">
      <li><b>Monitoreo continuo:</b> Evaluar periódicamente el rendimiento del modelo en producción (ej. Accuracy, AUC-ROC).</li>
      <li><b>Retraining:</b> Re-entrenar el modelo con nuevos datos para evitar desfases (<i>data drift</i>).</li>
      <li><b>Validación de datos de entrada:</b> Asegurar que los nuevos datos mantengan la misma distribución y formato esperado.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">📊 Actualización de Datos</h4>
    <ul style="list-style:none; padding:0;">
      <li><b>Nuevas fuentes:</b> Incorporar datos de otras regiones o países.</li>
      <li><b>Variables adicionales:</b> Incluir nuevas características relevantes (ej. nivel socioeconómico, dieta específica).</li>
      <li><b>Limpieza periódica:</b> Eliminar duplicados y outliers en lotes de datos nuevos.</li>
    </ul>

    <h4 style="color:#005599; margin-top:14px;">📌 Ejemplos de acciones realizadas</h4>
    <ul style="list-style:none; padding:0;">
      <li>Eliminación de la columna <b>SCC</b> por irrelevancia.</li>
      <li>Transformación de <b>TUE</b> de horas a minutos para mejor interpretación.</li>
      <li>Codificación de variables categóricas para compatibilidad con modelos de ML.</li>
    </ul>
  </div>
</article>


    </div>
<div class="nav-buttons">
  <button class="btn prev">⬅️ Anterior</button>
  <button class="btn toggle-video">🎥 Ver/Ocultar video</button>
  <button class="btn next">Siguiente ➡️</button>
</div>

    <!-- <div class="controls">
      <button class="btn" id="ml-prev">← Anterior</button>
      <button class="btn" id="ml-next">Siguiente →</button>
    </div> -->

    <div class="video-toggle">
      <button class="btn" id="ml-video-toggle">🎥 Ver/ocultar video explicativo</button>
      <div class="video-wrap" id="ml-video-wrap">
        <iframe class="video" src="https://www.youtube-nocookie.com/embed/jsgK2uuAh6w" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</section>

   <section id="contexto">
  <h2>Selección del contexto y problema</h2>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
    
    <div class="context-box" style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-left: 5px solid #0077cc;">
      <h3 style="color:#005599; margin-bottom: 10px;">📌 Descripción general</h3>
     <p>
    Este proyecto desarrolla un análisis exploratorio de datos (EDA) sobre el conjunto de datos 
    <strong>“Obesity or CVD Risk – Classify/Regressor/Cluster”</strong>, disponible en la plataforma Kaggle. 
    El propósito principal es identificar y analizar patrones y relaciones entre variables asociadas a 
    hábitos de vida, características demográficas y factores de riesgo vinculados a la obesidad y a las 
    enfermedades cardiovasculares.
  </p>
  <p>
    El conjunto de datos analizado contiene <strong>2.111 registros</strong> y <strong>17 atributos</strong> relacionados con 
    variables antropométricas, demográficas y de estilo de vida. Está diseñado para tareas de 
    <em>clasificación</em> orientadas a predecir el tipo de obesidad de una persona a partir de variables como:
  </p>
  <ul class="styled-list">
    <li>Edad, género, peso, altura</li>
    <li>Consumo de calorías, actividad física, tiempo en pantalla</li>
    <li>Medio de transporte, hidratación, antecedentes familiares</li>
  </ul>
  <p>
    El análisis contempla la inspección inicial de la información, la limpieza de datos, la detección 
    y tratamiento de valores nulos y duplicados, así como la normalización de variables cuando es pertinente. 
    Posteriormente, se abordan visualizaciones univariadas y bivariadas que permiten examinar tanto la 
    distribución de variables individuales como las relaciones entre pares de variables relevantes.
  </p>
  <p>
    También se calculan las correlaciones para identificar asociaciones estadísticamente significativas, 
    y se aplican técnicas como el <strong>Análisis de Componentes Principales (PCA)</strong> para la identificación 
    de posibles perfiles de riesgo.
  </p>
    </div>

    <div class="context-box" style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-left: 5px solid #0077cc;">
      <h3 style="color:#005599; margin-bottom: 10px;">❓ Problema de investigación</h3>
      <p>
       <p>
    ¿Podemos usar datos sobre <strong>hábitos de vida, salud y características personales</strong> para intentar 
    predecir el tipo de obesidad de una persona a partir de variables como:
  </p>
  <ul class="styled-list">
    <li>Consumo de calorías</li>
    <li>Peso actual</li>
    <li>Edad</li>
    <li>Género</li>
    <li>Antecedentes familiares de sobrepeso</li>
    <li>Actividad física</li>
    <li>Tiempo en pantalla</li>
  </ul>
  <p>
    Esto se aborda mediante el <strong>análisis de correlación de variables</strong>, con el fin de identificar 
    relaciones significativas que puedan aportar a la predicción del tipo de obesidad.
  </p>
    </div>

    <div class="context-box" style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-left: 5px solid #0077cc;">
      <h3 style="color:#005599; margin-bottom: 10px;">🎯 Objetivo</h3>
    <p>
    <strong>Objetivo general:</strong> Realizar un <em>análisis exploratorio de datos (EDA)</em> sobre el conjunto de datos 
    <strong>“Obesity or CVD Risk – Classify/Regressor/Cluster”</strong> para identificar patrones, distribuciones y 
    relaciones significativas entre variables antropométricas, hábitos de vida, riesgo de obesidad y enfermedades cardiovasculares.
  </p>
    </div>

  </div>
</section>

    <section id="analisis">
      
      <div class="overlay">
    <h2>Análisis exploratorio de datos</h2>
    <p>Consulta el análisis detallado en Google Colab:</p>
    
      <a href="https://colab.research.google.com/drive/1eNosl4dBdGDJehlBzuTXooGsVtuLCk0T#scrollTo=UPpnUCEDqUPj" target="_blank" class="btn">📊 Ver Análisis Completo</a>
  </div>

      
    </section>

    <section id="pdf">
       <div class="overlay">
      <h2>Generar PDF final</h2>
      <p>Haz clic para previsualizar o descargar el documento:</p>
      <button class="btn" onclick="togglePreview()">👁️ Ver / Ocultar PDF</button>
       <div class="pdf-preview" id="pdfPreview" style="display:none; margin:1rem 0;">
      <iframe src="/files/Proyecto_final_IA.pdf" width="100%" height="500px"></iframe>
    </div>
      <a href="/files/Proyecto_final_IA.pdf" download class="btn">📄 Descargar PDF Final</a>
    
      
    </div>
    </section>

    <section id="interactiva">
  <h2>Sección Interactiva</h2>
  <p>Explora este espacio interactivo diseñado para probar conceptos de obesidad y estilos de vida saludables.</p>

  <!-- Grid with 3 cards -->
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; margin-top: 20px;">
    
    <!-- Card 1: IMC Calculator -->
    <div style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-left: 5px solid #0077cc;">
      <h3 style="color:#005599; margin-bottom: 10px;">📊 Calculadora IMC</h3>
      <p>Introduce tu peso y altura para calcular tu Índice de Masa Corporal.</p>
      <input type="number" id="peso" placeholder="Peso (kg)" style="width:100%; padding:8px; margin:6px 0; border-radius:6px; border:1px solid #ccc;">
      <input type="number" id="altura" placeholder="Altura (cm)" style="width:100%; padding:8px; margin:6px 0; border-radius:6px; border:1px solid #ccc;">
      <button onclick="calcularIMC()" class="btn">Calcular</button>
      <p id="resultadoIMC" style="margin-top:10px; font-weight:600;"></p>
    </div>

    <!-- Card 2: Healthy Tips -->
    <div style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-left: 5px solid #0077cc;">
      <h3 style="color:#005599; margin-bottom: 10px;">🥗 Consejos Saludables</h3>
      <ul style="list-style:none; padding:0;">
        <li>Mantén una dieta equilibrada.</li>
        <li>Realiza actividad física regular.</li>
        <li>Hidrátate con suficiente agua.</li>
        <li>Evita el consumo excesivo de azúcares.</li>
      </ul>
    </div>

    <!-- Card 3: Obesity Poll -->
  <div style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-left: 5px solid #0077cc;">
      <h3 style="color:#005599; margin-bottom: 10px;">🗳️ Participa en la Encuesta</h3>
      <p>Tu opinión es importante. Ayúdanos a entender más sobre la obesidad y los hábitos de vida respondiendo nuestra encuesta.</p>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSelFWL_QfQtpaydXs7iZ9MwTCcXE5P8vOaStmQ_s7PgLgr4LQ/viewform?usp=header" target="_blank" class="btn">📝 Ir a la Encuesta</a>
    </div>

  </div> <!-- end grid -->

  <!-- Card 4: Obesity Risk Simulator (full width at bottom) -->
<!-- Row container for simulator + video -->
<div class="interactive-row">
  
  <!-- Simulador de Riesgo (smaller, left side) -->
  <div class="interactive-box small-box">
    <h3>⚖️ Simulador de Riesgo de Obesidad</h3>
    <p>Introduce tus datos y obtén una estimación del riesgo de obesidad.</p>

    <input type="number" id="edad" placeholder="Edad (años)">
    <input type="number" id="peso_r" placeholder="Peso (kg)">
    <input type="number" id="altura_r" placeholder="Altura (cm)">
    
    <select id="actividad">
      <option value="">Nivel de actividad física</option>
      <option value="1">Bajo</option>
      <option value="2">Moderado</option>
      <option value="3">Alto</option>
    </select>

    <select id="agua">
      <option value="">Consumo diario de agua</option>
      <option value="1">Menos de 1L</option>
      <option value="2">1-2L</option>
      <option value="3">Más de 2L</option>
    </select>

    <input type="number" id="sueno" placeholder="Horas de sueño">

    <button onclick="calcularRiesgo()" class="btn">Calcular Riesgo</button>
    <p id="resultadoRiesgo"></p>
  </div>

  <!-- Video Box (right side) -->
  <div class="interactive-box video-box">
    <h3>🎥 Video Explicativo</h3>
    <p>Mira este video para entender mejor los riesgos de la obesidad y cómo influyen los hábitos de vida.</p>
    <div class="video-container">
      <iframe 
        src="https://www.youtube-nocookie.com/embed/jsgK2uuAh6w" 
        frameborder="0" 
        allowfullscreen>
      </iframe>
    </div>
  </div>

</div>



  
</section>


  </main>

  <footer>
    &copy; 2025 Portal Obesidad - ML | Proyecto académico
  </footer>

  <script>
    function showSection(id, element) {
      document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
      element.classList.add('active');
    }
    function calcularIMC() {
  const peso = parseFloat(document.getElementById("peso").value);
  const altura = parseFloat(document.getElementById("altura").value) / 100; // convertir cm a m
  if (!peso || !altura) {
    document.getElementById("resultadoIMC").innerText = "⚠️ Por favor, introduce valores válidos.";
    return;
  }
  const imc = (peso / (altura * altura)).toFixed(2);
  let estado = "";
  if (imc < 18.5) estado = "Bajo peso";
  else if (imc < 24.9) estado = "Peso normal";
  else if (imc < 29.9) estado = "Sobrepeso";
  else estado = "Obesidad";

  document.getElementById("resultadoIMC").innerText = `Tu IMC es ${imc} → ${estado}`;
}

function calcularRiesgo() {
  const edad = parseInt(document.getElementById("edad").value);
  const peso = parseFloat(document.getElementById("peso_r").value);
  const altura = parseFloat(document.getElementById("altura_r").value) / 100; // cm → m
  const actividad = parseInt(document.getElementById("actividad").value);
  const agua = parseInt(document.getElementById("agua").value);
  const sueno = parseInt(document.getElementById("sueno").value);

  if (!edad || !peso || !altura || !actividad || !agua || !sueno) {
    document.getElementById("resultadoRiesgo").innerText = "⚠️ Por favor, completa todos los campos.";
    return;
  }

  // Calcular IMC
  const imc = peso / (altura * altura);

  // Puntuación base
  let score = 0;

  if (imc >= 30) score += 3;
  else if (imc >= 25) score += 2;
  else score += 1;

  if (actividad === 1) score += 2;
  else if (actividad === 2) score += 1;

  if (agua === 1) score += 2;
  else if (agua === 2) score += 1;

  if (sueno < 6) score += 2;
  else if (sueno < 8) score += 1;

  if (edad > 50) score += 1;

  let riesgo = "";
  if (score <= 3) riesgo = "Riesgo Bajo ✅";
  else if (score <= 6) riesgo = "Riesgo Moderado ⚠️";
  else riesgo = "Riesgo Alto ❌";

  document.getElementById("resultadoRiesgo").innerText = `Resultado: ${riesgo}`;
}
(function () {
    const steps = Array.from(document.querySelectorAll('#ciclo .step'));
    const panels = Array.from(document.querySelectorAll('#ciclo .panel'));
    const progress = document.getElementById('ml-progress');
    const prevBtn = document.getElementById('ml-prev');
    const nextBtn = document.getElementById('ml-next');
    const videoToggle = document.getElementById('ml-video-toggle');
    const videoWrap = document.getElementById('ml-video-wrap');
    const total = steps.length;
    let current = 0;

   function updateUI(index) {
  current = Math.max(0, Math.min(total - 1, index));
  steps.forEach(s => s.classList.remove('active'));
  panels.forEach(p => p.classList.remove('active'));
  steps[current].classList.add('active');
  panels[current].classList.add('active');
  progress.style.width = ((current) / (total - 1)) * 100 + '%';
}
    // Click on steps
    steps.forEach((stepEl, i) => {
      stepEl.addEventListener('click', () => updateUI(i));
      stepEl.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); updateUI(i); }
      });
    });

    // Prev/Next
    prevBtn.addEventListener('click', () => updateUI(current - 1));
    nextBtn.addEventListener('click', () => updateUI(current + 1));

    // Keyboard arrows globally when ciclo is visible
    document.addEventListener('keydown', (e) => {
      const isVisible = document.getElementById('ciclo').classList.contains('active');
      if (!isVisible) return;
      if (e.key === 'ArrowRight') updateUI(current + 1);
      if (e.key === 'ArrowLeft')  updateUI(current - 1);
    });

    // Toggle video
    // videoToggle.addEventListener('click', () => {
    //   videoWrap.classList.toggle('open');
    // });

    // Initialize
    updateUI(0);
  })();



  
document.addEventListener("DOMContentLoaded", () => {
  const panels = document.querySelectorAll(".panel");
  const prevBtn = document.querySelector(".nav-buttons .prev");
  const nextBtn = document.querySelector(".nav-buttons .next");
  const toggleVideoBtn = document.querySelector(".nav-buttons .toggle-video");

  let currentStep = 0; // start at first panel

  function showStep(stepIndex) {
    panels.forEach((panel, i) => {
      panel.style.display = (i === stepIndex) ? "block" : "none";
    });
    currentStep = stepIndex;
    // disable prev at first step, next at last step
    prevBtn.disabled = (currentStep === 0);
    nextBtn.disabled = (currentStep === panels.length - 1);
  }

  // Init first step
  showStep(currentStep);

  // Event listeners
  prevBtn.addEventListener("click", () => {
    if (currentStep > 0) {
      showStep(currentStep - 1);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  });

  nextBtn.addEventListener("click", () => {
    if (currentStep < panels.length - 1) {
      showStep(currentStep + 1);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  });

  toggleVideoBtn.addEventListener("click", () => {
    const currentPanel = panels[currentStep];
    const video = currentPanel.querySelector("video, iframe");
    if (video) {
      if (video.style.display === "none" || video.style.display === "") {
        video.style.display = "block";
        toggleVideoBtn.textContent = "🎥 Ocultar video";
      } else {
        video.style.display = "none";
        toggleVideoBtn.textContent = "🎥 Ver video";
      }
    } else {
      alert("No hay video en este paso.");
    }
  });
});

function togglePreview() {
    const preview = document.getElementById("pdfPreview");
    preview.style.display = (preview.style.display === "none") ? "block" : "none";
  }
  
  </script>
</body>
</html>
